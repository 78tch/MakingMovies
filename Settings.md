# Settings

* シーン
* ソース
* 音声ミキサー
  
## 作成するどの動画でもほぼ共通な設定（プロファイル）
1. 作成する動画の、「解像度、fps、録画フォーマット、エンコーダ、音声サンプルレート」
2. グローバル音声デバイス（全体で共通の音声）
3. モニタリングデバイス
4. 

## 作成する動画の種類によってパターン化される設定（シーンコレクション）
1. 画面切り替えを何通りぐらいするか。
2. 何の画面を使うか。（デスクトップ画面、アプリのウィンドウ、Webカメラ、画像、字幕）

## 3通りのデスクトップ動画を録画する様子から、どういう設定があるのかを見る。
1. 1通り目：4台のWebカメラの画面を切り替えて操作する様子を動画にする。（1カメ、2カメ、3カメ、4カメに切り替えるイメージ。音声は、カメラごとの音声があり、1カメの音声を全体共通で残すイメージ。）
2. 2通り目：1種類のアプリの画面を、全体・左上の拡大・中央の拡大・右上の拡大と切り替えて操作する様子を動画にする。
3. 3通り目：4種類のアプリのウィンドウを切り替えて操作する様子を動画にする。
4. 3種類の動画は、動画フォーマット（プロファイル）は共通。ソースの取り方（シーンコレクション）が違う。→通常、録る動画によって切り替えたい、となるのは「シーンコレクション」か。

## 切り替え（保存・読み込み）できる設定ファイル
設定ファイルの保存場所は「Macintosh HD->ユーザ->ユーザー名->ライブラリ（初期状態では非表示フォルダ）->Application Support->obs-studio -> basic」のなか。
1. プロファイル：
「設定->出力」（エンコード設定）、「設定->音声」（オーディオ設定）、「設定->映像」（出力解像度設定）の設定内容が、iniファイルで「obs-studio -> basic->profiles->プロファイル名->basic.ini」にまとめて保存される。iniファイルを指定することで切り替えができる。※保存される動画の品質に関する設定項目。
2. シーンコレクション：
どの映像や音声を使うか、という組み合わせを指定したものを「シーン」として保存するが、複数のシーンをひとかたまりで保存したものが「シーンコレクション」。「設定->ホットキー」（ショートカットのカスタム）も含まれる。「obs-studio -> basic->scenes->シーンコレクション名.json」に保存される。jsonファイルを指定することで切り替えができる。※映像のソースに関する設定項目。
3. その他設定
アプリ全体にかかる設定なので、切り替えられない。「obs-studio ->global.ini」に保存される。

## 機器

## 保存形式設定
コーデックにH.265が選択可能。
ファイル形式はデフォルトの「mkv」にしつつ、「設定->詳細設定->録画->自動的にmp4に再多重化する」で、録画後に自動でmp4に変換できる。
事後でも「ファイル->録画の再多重化」で録画ファイルを選択し、いったんウィンドウが閉じるが、再度開いて「ファイル->録画の再多重化->再多重化」とすると、mp4形式に変換される。

## 映像設定
1. 「シーン」を1から4まで4つ設定する。
2. ホットキーの「シーン切り替え」を「シーン1」は「Ctrl + 1」などとする。これで、4つのシーンをキーボードで切り替えられる。
3. 各シーンには適当にアプリケーションのウィンドウを指定する。これは、配信・録画のたびに、指定しなおすこと。例１：４種類のアプリ画面をそれぞれ割り当て。例２：１つのウインドウの、全体・左上の拡大・中央の拡大・右上の拡大に割り当て。
4. 

## ミキサー設定
- 「シーンに関係なく全体共通の音声」・「シーンに固有の音声」
- 「デスクトップ音声」・「マイク音声」
- 「設定->音声」で「デスクトップ音声2」と「マイク音声1」の機器を設定。
- 「デスクトップ音声2」と「マイク音声2」～「マイク音声4」は適宜設定。
- 「設定->音声」の設定は、「シーンに関係なく全体共通の音声」
- 「シーンに固有の音声」は「ソース」に設定。そのシーンに切り替えた時だけ、音声ミキサーに現れる。
- Macは「デスクトップ音声」というのがない。「ソース」に「macOS スクリーン」を指定すると、「音声ミキサー」に「macOS スクリーンキャプチャ」というのが表示される。「非推奨->ウィンドウキャプチャ」などでデスクトップ上のサウンドを録画に含めたい場合、「SoundFlower」などの仮想オーディオデバイスを導入しなければならない。

## プロファイル
保存されるのは、①出力解像度、②エンコード設定、③オーディオ設定。
シーンは保存されない。

## シーンコレクション

## ヘッドホン
ヘッドホンは２つあると便利。
「①」と、「②」の２つあると便利。
①デスクトップ音声のみ聞くヘッドホン：録画時に音を聞く。OSの音声出力先に指定する。
②マイク音声とデスクトップ音声のミックスを聞くヘッドホン：設定時に確認のために音を聞く。マイク音声とデスクトップ音声のバランスや、フィルタのかかり具合を確認する。
- OBSの「モニタリングデバイス」に指定する。
- 「音声ミキサー」の設定「オーディオの詳細プロパティ」でモニターしたい音声の「音声モニタリング」を「モニターオフ」から「モニターのみ（出力はミュート）」「モニターと出力」等にする。（出力はミュート）は、調整時のみの設定としないと、そのままにしていると、録画に録音されない。「モニターと出力」だと、リターン音が二重に（遅れて）聞こえる？そうでもない？

## 音声ミキサー
1. ノイズ抑制：0から5ぐらい。-10～-20でも。
2. ゲイン：
3. ノイズゲート：閉鎖と開放の差を5dBぐらいに。-38と-32、など。
4. コンプレッサー（比率1.5～10、閾値-18dB、アタックタイム3～6ms、リリースタイム10～60ms、出力ゲイン）
   の順にかける。
実際にしゃべって、モニターしながら、設定数値を調整していく。

## コンプレッサー設定の追い込み方
1.  基本的には、マイクのみ「フィルタ」で設定する。調整は、マイク音声をヘッドホンで聴きながらやる。
2.  「音声ミキサー->オーディオの詳細プロパティ->（マイクの）音声モニタリング->モニターのみ（出力はミュート）」で、調整作業をする。設定が固まったら、「モニターオフ」にする。※「モニターのみ（出力はミュート）」のままだと、録画時に無音になってしまう。
3.  「マイク->フィルタ->コンプレッサー->OK->」
4.  比率：音量が閾値を超えた部分の圧縮率。大きいほど強く圧縮し音割れは防げるが不自然になる。「2～10」ぐらいとする。大きい声を出してみて、かかり具合を確認する。
5.  閾値：レベルメーターのどこを超えたら発動するか、の値。大きい声を出して、かかり始めが自然になる数値を探す。初期値は「-18dB」。黄色が「-20～-9」、赤が「-9～0」
6.  アタックタイム
7.  リリースタイム
8.  出力ゲイン
9.  サイド

## シーン
画面全体と、拡大左、拡大中央、タイトルスライドを用意して切り替える。
「シーン」は「画面1」「画面2」「画面3」などとして保存し、「ソース」はその都度、指定しなおせばよい。
「シーン」の切り替えが「ホットキー」でできるので、たとえば１から４までの「シーン」を作って、ホットキーをそれぞれ「Ctrl + 1」などとすれば、「シーン」の切り替えがショートカットでできるようになる。

## アプリの権限を確認する

※Macの場合、「ウィンドウキャプチャ」「画面キャプチャ」は非推奨となり、代わりに「macOS スクリーンキャプチャ」を選ぶ。
ただし権限許可が必要で、「システム設定->プライバシーとセキュリティ->画面収録」で、OBSのトグルをONにすると、キャプチャが始まる。

## 録画フォーマット
デフォルトは「mkv」、録画後にmp4に変換できる。
「ファイル->録画の再多重化」で録画ファイルを選択する。いったんウィンドウが閉じるが、再度開いて「ファイル->録画の再多重化->再多重化」とすると、mp4形式に変換される。

## 良さげなホットキー
1. 録画開始：
2. 録画終了：（同じホットキーを指定すると、トグルにできる。）
3. 録画一時停止：
4. 録画再開：
5. マイク->ミュート：
6. マイク->ミュート解除：
7. シーン切り替え：「シーン1」に切り替え「Ctrl + 1」
8. シーン切り替え：「シーン2」に切り替え「Ctrl + 2」
9. シーン切り替え：「シーン3」に切り替え「Ctrl + 3」
10. シーン切り替え：「シーン4」に切り替え「Ctrl + 4」

## OBSのウィンドウが最前面でない時（フォーカスがない時）にもホットキーを有効にする設定
1. Windows はもともとそういう動作をする。
2. Mac の場合は、「システム設定->プライバシーとセキュリティ->アクセシビリティ->下のアプリケーションにコンピュータの制御を許可。」でOBSを有効にして、OBSを再起動したら、OBSのウィンドウが最前面でなくても、ホットキーが効くようになる。
3. Ubuntu の場合は、
